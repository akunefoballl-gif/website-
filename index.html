<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Absensi XI TJKT 3</title>

<meta name="theme-color" content="#020617">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">

<style>
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
margin:0;
background:linear-gradient(135deg,#020617,#0f172a);
color:#e5e7eb;
}
.container{max-width:1200px;margin:auto;padding:20px}
header{
padding:18px;border-radius:20px;
background:rgba(255,255,255,.08);
backdrop-filter:blur(18px);
box-shadow:0 20px 40px rgba(0,0,0,.45);
}
header h1{margin:0;font-size:22px}
main{margin-top:20px;display:grid;grid-template-columns:1fr 360px;gap:20px}
.card{
background:rgba(255,255,255,.06);
border-radius:22px;padding:20px;
backdrop-filter:blur(16px);
box-shadow:0 20px 40px rgba(0,0,0,.35);
}
h3{margin-top:0}
table{width:100%;border-collapse:separate;border-spacing:0 10px}
thead th{text-align:left;font-size:14px;opacity:.8}
tbody tr{background:#020617;border-radius:14px}
td{padding:12px}
.badge{padding:6px 14px;border-radius:20px;font-weight:700;font-size:13px}
.hadir{background:#22c55e}
.izin{background:#f59e0b}
.sakit{background:#3b82f6}
.alpha{background:#ef4444}
label{font-size:14px;margin-top:12px;display:block}
input,select{
width:100%;margin-top:6px;padding:14px;
border-radius:16px;border:none;
background:#020617;color:white;font-size:16px;
}
button{
width:100%;margin-top:18px;padding:16px;
border:none;border-radius:18px;
font-weight:700;font-size:16px;
background:linear-gradient(135deg,#38bdf8,#8b5cf6);
color:white;cursor:pointer;
}
.stat{
margin-top:10px;background:#020617;
padding:12px;border-radius:14px;
display:flex;justify-content:space-between;
}
@media (max-width:768px){
main{grid-template-columns:1fr}
table{display:block;overflow-x:auto}
}
</style>
</head>

<body>
<div class="container">

<header>
<h1>ðŸ“‹ Absensi Kelas XI TJKT 3</h1>
</header>

<main>

<section class="card">
<h3>Riwayat Absensi</h3>
<table>
<thead>
<tr>
<th>Nama</th>
<th>Mapel</th>
<th>Status</th>
<th>Jam</th>
</tr>
</thead>
<tbody id="riwayat"></tbody>
</table>
</section>

<aside class="card">
<h3>Form Absensi</h3>

<label>Tanggal</label>
<input type="date" id="tanggal">

<label>Nama Siswa</label>
<select id="nama"></select>

<label>Mata Pelajaran</label>
<select id="mapel"></select>

<label>Status</label>
<select id="status">
<option value="hadir">Hadir</option>
<option value="izin">Izin</option>
<option value="sakit">Sakit</option>
<option value="alpha">Alpha</option>
</select>

<button onclick="simpan()">Simpan Absensi</button>

<button onclick="exportExcel()" style="margin-top:10px;background:linear-gradient(135deg,#22c55e,#16a34a)">
ðŸ“¤ Export Excel
</button>

<hr style="opacity:.2;margin:20px 0">

<h3>Statistik</h3>
<div class="stat">Hadir <span id="h">0</span></div>
<div class="stat">Izin <span id="i">0</span></div>
<div class="stat">Sakit <span id="s">0</span></div>
<div class="stat">Alpha <span id="a">0</span></div>
</aside>

</main>
</div>

<script>
// fullscreen hp
document.addEventListener("click",()=>{
if(document.documentElement.requestFullscreen){
document.documentElement.requestFullscreen();
}
},{once:true});

// DATA SISWA
const siswa=[
"Aisyah","Akhmad","Andre","Aulia Hanif","Bayu","Bilal","Cardi","Dimas",
"Juan","Ridho","Alpiya","Aulia Safitri","Echa","Fani Agustin","Khairunnisa",
"Lestari Wulandari","Lusi","Marsya","Melati Sari","Metha Aulia","Metha Maheti",
"Nadia Oktaviani","Natalya","Nur Idayah","Putri","Rina Puspitasari",
"Rina Wati","Ririn","Salsabila Rahma","Saukiyah","Yani Maulidah"
].sort((a,b)=>a.localeCompare(b,'id'));

// MAPEL TKJ XI (20)
const mapelList=[
"Pendidikan Agama","PPKN","Bahasa Indonesia","Bahasa Inggris","Bahasa Jepang",
"Matematika","Sejarah Indonesia","Informatika",
"Administrasi Sistem Jaringan",
"Teknologi Jaringan Kabel & Nirkabel",
"Keamanan Jaringan",
"Sistem Komputer",
"Pemrograman Dasar",
"Pemrograman Web",
"Basis Data",
"Virtualisasi",
"Troubleshooting Jaringan",
"Kewirausahaan",
"Projek Kreatif & Kewirausahaan",
"Pendidikan Jasmani"
];

const namaSelect=document.getElementById("nama");
const mapelSelect=document.getElementById("mapel");

siswa.forEach(n=>{
let o=document.createElement("option");
o.textContent=o.value=n;
namaSelect.appendChild(o);
});
mapelList.forEach(m=>{
let o=document.createElement("option");
o.textContent=o.value=m;
mapelSelect.appendChild(o);
});

tanggal.valueAsDate=new Date();
let data=JSON.parse(localStorage.getItem("absen_xi_tjkt3")||"[]");

function simpan(){
let t=tanggal.value;
let n=nama.value;
let m=mapel.value;
let s=status.value;

if(data.find(x=>x.t===t && x.n===n && x.m===m)){
alert("Sudah absen untuk mapel ini!");
return;
}

data.push({t,n,m,s,jam:new Date().toLocaleTimeString()});
localStorage.setItem("absen_xi_tjkt3",JSON.stringify(data));
render();
}

function render(){
riwayat.innerHTML="";
let t=tanggal.value;
let h=i=s=a=0;

data.filter(x=>x.t===t).forEach(d=>{
if(d.s=="hadir")h++;
if(d.s=="izin")i++;
if(d.s=="sakit")s++;
if(d.s=="alpha")a++;

riwayat.innerHTML+=`
<tr>
<td>${d.n}</td>
<td>${d.m}</td>
<td><span class="badge ${d.s}">${d.s}</span></td>
<td>${d.jam}</td>
</tr>`;
});
h.innerText=h;i.innerText=i;s.innerText=s;a.innerText=a;
}

function exportExcel(){
if(data.length===0){alert("Belum ada data");return;}
let csv="Tanggal,Nama,Mapel,Status,Jam\n";
data.forEach(d=>{
csv+=`${d.t},"${d.n}","${d.m}",${d.s},${d.jam}\n`;
});
let blob=new Blob([csv],{type:"text/csv"});
let url=URL.createObjectURL(blob);
let a=document.createElement("a");
a.href=url;a.download="Absensi_XI_TJKT3.csv";a.click();
URL.revokeObjectURL(url);
}

tanggal.onchange=render;
render();
</script>
</body>
</html>
